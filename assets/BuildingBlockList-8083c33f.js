import{B as L}from"./BuildingBlock-d803b787.js";import{_ as y,G as v,E as x,V as I,H as B,J as n,M as a,L as e,m as t,K as _,Q as k,F as V,O as p,W as b,S as N}from"./index-bd0c76e7.js";import{R as H}from"./RegisterLoadingProgress-c19dda21.js";import{B as O,a as F}from"./BuildingBlockListItem-ad6cb32c.js";import{n as P,l as R,p as C}from"./VContainer-9a1a02f7.js";import{a as g,V as f}from"./VRow-b58bfb61.js";import{h as E,f as S,g as j}from"./VList-540ba3a7.js";import"./_commonjsHelpers-725317a4.js";const D={components:{BuildingBlockListItem:O,BuildingBlockFilters:F,RegisterLoadingProgress:H,BuildingBlock:L},data(){return{loading:!1,buildingBlocks:null,bblockDialog:!1,bblockView:null,registerProgress:{completed:0,total:0},showRegisterLoadingProgress:!1,filterValues:null}},mounted(){this.loading=!0,v.getBBlocks(x.config.showImported).then(i=>{this.buildingBlocks=Object.values(i).sort((l,s)=>{const o=l.itemIdentifier.toLowerCase(),u=s.itemIdentifier.toLowerCase();return o<u?-1:o>u?1:0})}).finally(()=>{this.loading=!1})},methods:{interceptLinks:I,openUrl(i){window.open(i)},isVisible(i){var l,s;if(this.filterValues.text){const o=this.filterValues.text.trim().toLowerCase();if(i.itemIdentifier.toLowerCase().indexOf(o)<0&&i.name.toLowerCase().indexOf(o)<0)return!1}return!(!this.filterValues.status.includes(i.status)||this.filterValues.registers!==null&&!this.filterValues.registers.includes(i.register.url)||(l=this.filterValues.tags)!=null&&l.length&&!((s=i.tags)!=null&&s.some(o=>this.filterValues.tags.includes(o))))}},computed:{filteredBuildingBlocks(){if(!this.filterValues||!this.buildingBlocks)return[];const i=[],l=[];return this.buildingBlocks.forEach(s=>{this.isVisible(s)&&(s.highlighted?i:l).push(s)}),{highlighted:i,nonHighlighted:l}}}},T=N("h2",null,"Highlighted Building Blocks",-1);function z(i,l,s,o,u,d){const w=B("building-block-filters"),c=B("building-block-list-item");return n(),a(P,{class:"bblock-list"},{default:e(()=>{var h,m;return[t(f,null,{default:e(()=>[t(g,null,{default:e(()=>[t(w,{onFilterChange:l[0]||(l[0]=r=>this.filterValues=r)})]),_:1})]),_:1}),(m=(h=d.filteredBuildingBlocks)==null?void 0:h.highlighted)!=null&&m.length?(n(),a(f,{key:0,align:"stretch"},{default:e(()=>[t(g,{cols:"12"},{default:e(()=>[T]),_:1}),(n(!0),_(V,null,k(d.filteredBuildingBlocks.highlighted,r=>(n(),a(g,{key:r.itemIdentifier,md:"6"},{default:e(()=>[t(c,{bblock:r,to:{name:"BuildingBlock",params:{id:r.itemIdentifier}},class:"highlighted-bblock"},null,8,["bblock","to"])]),_:2},1024))),128)),t(E)]),_:1})):p("",!0),t(f,{align:"stretch"},{default:e(()=>[(n(!0),_(V,null,k(d.filteredBuildingBlocks.nonHighlighted,r=>(n(),a(g,{key:r.itemIdentifier,md:"6"},{default:e(()=>[t(c,{bblock:r,to:{name:"BuildingBlock",params:{id:r.itemIdentifier}}},null,8,["bblock","to"])]),_:2},1024))),128))]),_:1}),u.buildingBlocks&&!d.filteredBuildingBlocks.nonHighlighted.length&&!d.filteredBuildingBlocks.highlighted.length?(n(),a(f,{key:1},{default:e(()=>[t(g,null,{default:e(()=>[t(R,null,{default:e(()=>[u.buildingBlocks.length?(n(),a(C,{key:0},{default:e(()=>[b("No building blocks match the current filters")]),_:1})):(n(),a(C,{key:1},{default:e(()=>[b("No building blocks were found in the register.")]),_:1}))]),_:1})]),_:1})]),_:1})):p("",!0),t(j,{"model-value":u.loading,class:"align-center justify-center"},{default:e(()=>[t(S,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"])]}),_:1})}const A=y(D,[["render",z]]);export{A as default};
