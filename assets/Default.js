import{_ as ve,c as Pe,b as Le}from"./index.js";import{o as T,h as W,i as F,j as r,c as R,k as Y,l as q,t as Z,w as S,n as G,p as De,q as U,u as de,v as Re,x as _,y as b,z as C,A as J,B as Ie,C as He,D as K,E as N,G as me,H as ge,I as fe,J as j,K as A,L as X,M as Ne,N as $,O as Ae,P as O,Q as Oe,R as he,S as ye,T as we,U as Ye,V as ze,W as We,X as Ue,Y as je,Z as be,r as re,_ as Xe,$ as $e,a0 as qe}from"./vendor.js";import{V as Fe,a as pe,b as Se,c as Ze,m as Ve,d as Ge,e as Je,f as Ke,u as Qe,g as se,h as et,i as tt,j as at,k as lt,l as ot}from"./VContainer.js";import{V as _e,a as z,b as ke,c as xe,d as nt,u as Q,e as rt}from"./VList.js";import{V as st,m as it,a as ie,b as ut,c as ct}from"./VToolbar.js";import"./dialog-transition.js";const vt={props:{completed:Number,total:Number,failed:Object},data(){return{showErrorsDialog:!1}},methods:{openUrl(e){window.open(e)}},computed:{finished(){return this.completed+Object.keys(this.failed).length===this.total},hasErrors(){return this.failed&&Object.keys(this.failed).length},textColor(){return this.hasErrors?"error":this.total>0&&this.completed==this.total?"success":"primary"},textStyle(){return this.hasErrors?"color: rgb(var(--v-theme-error))":""}}},dt={key:0,class:"d-flex align-center"},mt={class:"flex-grow-1 flex-shrink-1"},gt=F("p",null,"The following errors were encountered while loading the list of building block registers:",-1);function ft(e,l,o,n,a,t){return o.total?(T(),W("div",dt,[F("div",mt,[r(Fe,{"model-value":100*o.completed/o.total,color:t.textColor},null,8,["model-value","color"])]),F("div",{class:"text-caption text-no-wrap pl-3",style:De(t.textStyle)},[t.finished?Y("",!0):(T(),R(_e,{key:0,size:"10",indeterminate:"",class:"mr-1"})),q(" Loaded "+Z(o.completed)+" / "+Z(o.total)+" registers ",1),t.hasErrors?(T(),R(z,{key:1,class:"mx-2",size:"x-small",color:"error","prepend-icon":"mdi-alert-octagon",onClick:l[0]||(l[0]=s=>a.showErrorsDialog=!0)},{default:S(()=>[q(" Errors ")]),_:1})):Y("",!0),r(z,{size:"x-small",onClick:l[1]||(l[1]=G(s=>this.$emit("hide"),["prevent"])),class:"mx-2"},{default:S(()=>[q("Hide")]),_:1})],4),r(st,{modelValue:a.showErrorsDialog,"onUpdate:modelValue":l[3]||(l[3]=s=>a.showErrorsDialog=s),"max-width":"800"},{default:S(()=>[r(pe,{title:"Register load errors"},{default:S(()=>[r(Se,null,{default:S(()=>[gt,r(ke,null,{default:S(()=>[(T(!0),W(U,null,de(this.failed,(s,i)=>(T(),R(xe,{title:i,subtitle:s.error.toString(),onClick:G(u=>t.openUrl(i),["prevent"])},null,8,["title","subtitle","onClick"]))),256))]),_:1})]),_:1}),r(Ze,null,{default:S(()=>[r(nt),r(z,{text:"Close",onClick:l[2]||(l[2]=s=>a.showErrorsDialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):Y("",!0)}const ht=ve(vt,[["render",ft]]);const yt=Re({scrollTarget:{type:String},scrollThreshold:{type:[String,Number]}},"scroll");function wt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{thresholdMetCallback:o,scrollThreshold:n,canScroll:a}=l;let t=0;const s=_(null),i=_(0),u=_(0),g=_(0),c=_(!1),h=_(!1),w=b(()=>Number(e.scrollThreshold??n??300)),y=()=>{const d=s.value;!d||a&&!a.value||(t=i.value,i.value="window"in d?d.pageYOffset:d.scrollTop,h.value=i.value<t,g.value=Math.abs(i.value-w.value))};return C(h,()=>{u.value=u.value||i.value}),C(c,()=>{u.value=0}),J(()=>{C(()=>e.scrollTarget,d=>{var B;const E=d?document.querySelector(d):window;if(!E){Ie(`Unable to locate element with identifier ${d}`,He());return}E!==s.value&&((B=s.value)==null||B.removeEventListener("scroll",y),s.value=E,s.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),K(()=>{var d;(d=s.value)==null||d.removeEventListener("scroll",y)}),o&&C(()=>Math.abs(i.value-u.value)>w.value,d=>{d&&o({currentThreshold:g.value,isScrollingUp:h.value,savedScroll:u})},{immediate:!0}),a&&C(a,y,{immediate:!0}),{computedScrollThreshold:w,currentScroll:i,currentThreshold:g,isScrollActive:c,isScrollingUp:h,savedScroll:u}}const bt=N()({name:"VAppBar",props:{scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...it(),...me(),...yt(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const n=_(),a=ge(e,"modelValue"),t=b(()=>{var V;const f=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:f.has("hide"),inverted:f.has("inverted"),collapse:f.has("collapse"),elevate:f.has("elevate"),fadeImage:f.has("fade-image")}}),s=b(()=>{const f=t.value;return f.hide||f.inverted||f.collapse||f.elevate||f.fadeImage||!a.value}),{currentScroll:i,currentThreshold:u,computedScrollThreshold:g,isScrollingUp:c}=wt(e,{canScroll:s}),h=b(()=>e.collapse||t.value.collapse&&(t.value.inverted?i.value<1:i.value>0)),w=b(()=>e.flat||t.value.elevate&&i.value===(t.value.inverted?1:0)),y=b(()=>Math.min((u.value-i.value)/u.value||1,1)),d=b(()=>t.value.fadeImage?t.value.inverted?1-y.value:y.value:void 0),E=b(()=>{var v,m;if(t.value.hide&&t.value.inverted)return 0;const f=((v=n.value)==null?void 0:v.contentHeight)??0,V=((m=n.value)==null?void 0:m.extensionHeight)??0;return f+V});function B(){const f=i.value;t.value.hide?t.value.inverted?a.value=f>g.value:a.value=c.value||f<g.value:t.value.inverted?a.value=i.value===0:a.value=!0}C(i,B,{immediate:!0}),C(t,B);const{ssrBootStyles:M}=Q(),{layoutItemStyles:D}=fe({id:e.name,order:b(()=>parseInt(e.order,10)),position:j(e,"location"),layoutSize:E,elementSize:_(void 0),active:a,absolute:j(e,"absolute")});return A(()=>{const[f]=ie.filterProps(e);return r(ie,X({ref:n,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...D.value,"--v-toolbar-image-opacity":d.value,height:void 0,...M.value},e.style]},f,{collapse:h.value,flat:w.value}),o)}),{}}}),pt=N()({name:"VAppBarNavIcon",props:{icon:{type:Ne,default:"$menu"},...$()},setup(e,l){let{slots:o}=l;return A(()=>r(z,{class:["v-app-bar-nav-icon",e.class],icon:e.icon,style:e.style},o)),{}}}),St=N()({name:"VAppBarTitle",props:ut(),setup(e,l){let{slots:o}=l;return A(()=>r(ct,X(e,{class:"v-app-bar-title"}),o)),{}}});const Vt=N()({name:"VMain",props:{scrollable:Boolean,...$(),...Ve({tag:"main"})},setup(e,l){let{slots:o}=l;const{mainStyles:n}=Ae(),{ssrBootStyles:a}=Q();return A(()=>r(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[n.value,a.value,e.style]},{default:()=>{var t,s;return[e.scrollable?r("div",{class:"v-main__scroller"},[(t=o.default)==null?void 0:t.call(o)]):(s=o.default)==null?void 0:s.call(o)]}})),{}}});function _t(e){let{rootEl:l,isSticky:o,layoutItemStyles:n}=e;const a=_(!1),t=_(0),s=b(()=>{const g=typeof a.value=="boolean"?"top":a.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,a.value?{[g]:O(t.value)}:{top:n.value.top}]});J(()=>{C(o,g=>{g?window.addEventListener("scroll",u,{passive:!0}):window.removeEventListener("scroll",u)},{immediate:!0})}),K(()=>{document.removeEventListener("scroll",u)});let i=0;function u(){const g=i>window.scrollY?"up":"down",c=l.value.getBoundingClientRect(),h=parseFloat(n.value.top??0),w=window.scrollY-Math.max(0,t.value-h),y=c.height+Math.max(t.value,h)-window.scrollY-window.innerHeight;c.height<window.innerHeight-h?(a.value="top",t.value=h):g==="up"&&a.value==="bottom"||g==="down"&&a.value==="top"?(t.value=window.scrollY+c.top,a.value=!0):g==="down"&&y<=0?(t.value=0,a.value="bottom"):g==="up"&&w<=0&&(t.value=c.top+w,a.value="top"),i=window.scrollY}return{isStuck:a,stickyStyles:s}}const kt=100,xt=20;function ue(e){const l=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*l}function ce(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let l=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const n=ue(l),a=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);l+=(a-n)*Math.abs(a),o===e.length-1&&(l*=.5)}return ue(l)*1e3}function Tt(){const e={};function l(a){Array.from(a.changedTouches).forEach(t=>{(e[t.identifier]??(e[t.identifier]=new Oe(xt))).push([a.timeStamp,t])})}function o(a){Array.from(a.changedTouches).forEach(t=>{delete e[t.identifier]})}function n(a){var g;const t=(g=e[a])==null?void 0:g.values().reverse();if(!t)throw new Error(`No samples for touch id ${a}`);const s=t[0],i=[],u=[];for(const c of t){if(s[0]-c[0]>kt)break;i.push({t:c[0],d:c[1].clientX}),u.push({t:c[0],d:c[1].clientY})}return{x:ce(i),y:ce(u),get direction(){const{x:c,y:h}=this,[w,y]=[Math.abs(c),Math.abs(h)];return w>y&&c>=0?"right":w>y&&c<=0?"left":y>w&&h>=0?"down":y>w&&h<=0?"up":Ct()}}}return{addMovement:l,endTouch:o,getVelocity:n}}function Ct(){throw new Error}function Et(e){let{isActive:l,isTemporary:o,width:n,touchless:a,position:t}=e;J(()=>{window.addEventListener("touchstart",M,{passive:!0}),window.addEventListener("touchmove",D,{passive:!1}),window.addEventListener("touchend",f,{passive:!0})}),K(()=>{window.removeEventListener("touchstart",M),window.removeEventListener("touchmove",D),window.removeEventListener("touchend",f)});const s=b(()=>["left","right"].includes(t.value)),{addMovement:i,endTouch:u,getVelocity:g}=Tt();let c=!1;const h=_(!1),w=_(0),y=_(0);let d;function E(v,m){return(t.value==="left"?v:t.value==="right"?document.documentElement.clientWidth-v:t.value==="top"?v:t.value==="bottom"?document.documentElement.clientHeight-v:H())-(m?n.value:0)}function B(v){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const p=t.value==="left"?(v-y.value)/n.value:t.value==="right"?(document.documentElement.clientWidth-v-y.value)/n.value:t.value==="top"?(v-y.value)/n.value:t.value==="bottom"?(document.documentElement.clientHeight-v-y.value)/n.value:H();return m?Math.max(0,Math.min(1,p)):p}function M(v){if(a.value)return;const m=v.changedTouches[0].clientX,p=v.changedTouches[0].clientY,k=25,P=t.value==="left"?m<k:t.value==="right"?m>document.documentElement.clientWidth-k:t.value==="top"?p<k:t.value==="bottom"?p>document.documentElement.clientHeight-k:H(),L=l.value&&(t.value==="left"?m<n.value:t.value==="right"?m>document.documentElement.clientWidth-n.value:t.value==="top"?p<n.value:t.value==="bottom"?p>document.documentElement.clientHeight-n.value:H());(P||L||l.value&&o.value)&&(c=!0,d=[m,p],y.value=E(s.value?m:p,l.value),w.value=B(s.value?m:p),u(v),i(v))}function D(v){const m=v.changedTouches[0].clientX,p=v.changedTouches[0].clientY;if(c){if(!v.cancelable){c=!1;return}const P=Math.abs(m-d[0]),L=Math.abs(p-d[1]);(s.value?P>L&&P>3:L>P&&L>3)?(h.value=!0,c=!1):(s.value?L:P)>3&&(c=!1)}if(!h.value)return;v.preventDefault(),i(v);const k=B(s.value?m:p,!1);w.value=Math.max(0,Math.min(1,k)),k>1?y.value=E(s.value?m:p,!0):k<0&&(y.value=E(s.value?m:p,!1))}function f(v){if(c=!1,!h.value)return;i(v),h.value=!1;const m=g(v.changedTouches[0].identifier),p=Math.abs(m.x),k=Math.abs(m.y);(s.value?p>k&&p>400:k>p&&k>3)?l.value=m.direction===({left:"right",right:"left",top:"down",bottom:"up"}[t.value]||H()):l.value=w.value>.5}const V=b(()=>h.value?{transform:t.value==="left"?`translateX(calc(-100% + ${w.value*n.value}px))`:t.value==="right"?`translateX(calc(100% - ${w.value*n.value}px))`:t.value==="top"?`translateY(calc(-100% + ${w.value*n.value}px))`:t.value==="bottom"?`translateY(calc(100% - ${w.value*n.value}px))`:H(),transition:"none"}:void 0);return{isDragging:h,dragProgress:w,dragStyles:V}}function H(){throw new Error}const Bt=["start","end","left","right","top","bottom"],Mt=N()({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Bt.includes(e)},sticky:Boolean,...Ge(),...$(),...Je(),...me(),...Ke(),...Ve({tag:"nav"}),...he()},emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,l){let{attrs:o,emit:n,slots:a}=l;const{isRtl:t}=ye(),{themeClasses:s}=we(e),{borderClasses:i}=Qe(e),{backgroundColorClasses:u,backgroundColorStyles:g}=se(j(e,"color")),{elevationClasses:c}=et(e),{mobile:h}=Ye(),{roundedClasses:w}=tt(e),y=at(),d=ge(e,"modelValue",null,x=>!!x),{ssrBootStyles:E}=Q(),B=_(),M=_(!1),D=b(()=>e.rail&&e.expandOnHover&&M.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),f=b(()=>ze(e.location,t.value)),V=b(()=>!e.permanent&&(h.value||e.temporary)),v=b(()=>e.sticky&&!V.value&&f.value!=="bottom");e.expandOnHover&&e.rail!=null&&C(M,x=>n("update:rail",!x)),e.disableResizeWatcher||C(V,x=>!e.permanent&&We(()=>d.value=!x)),!e.disableRouteWatcher&&y&&C(y.currentRoute,()=>V.value&&(d.value=!1)),C(()=>e.permanent,x=>{x&&(d.value=!0)}),Ue(()=>{e.modelValue!=null||V.value||(d.value=e.permanent||!h.value)});const{isDragging:m,dragProgress:p,dragStyles:k}=Et({isActive:d,isTemporary:V,width:D,touchless:j(e,"touchless"),position:f}),P=b(()=>{const x=V.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):D.value;return m.value?x*p.value:x}),{layoutItemStyles:L,layoutRect:I,layoutItemScrimStyles:Te}=fe({id:e.name,order:b(()=>parseInt(e.order,10)),position:f,layoutSize:P,elementSize:D,active:b(()=>d.value||m.value),disableTransitions:b(()=>m.value),absolute:b(()=>e.absolute||v.value&&typeof ee.value!="string")}),{isStuck:ee,stickyStyles:Ce}=_t({rootEl:B,isSticky:v,layoutItemStyles:L}),te=se(b(()=>typeof e.scrim=="string"?e.scrim:null)),Ee=b(()=>({...m.value?{opacity:p.value*.2,transition:"none"}:void 0,...I.value?{left:O(I.value.left),right:O(I.value.right),top:O(I.value.top),bottom:O(I.value.bottom)}:void 0,...Te.value}));je({VList:{bgColor:"transparent"}});function Be(){M.value=!0}function Me(){M.value=!1}return A(()=>{const x=a.image||e.image;return r(U,null,[r(e.tag,X({ref:B,onMouseenter:Be,onMouseleave:Me,class:["v-navigation-drawer",`v-navigation-drawer--${f.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":M.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":V.value,"v-navigation-drawer--active":d.value,"v-navigation-drawer--sticky":v.value},s.value,u.value,i.value,c.value,w.value,e.class],style:[g.value,L.value,k.value,E.value,Ce.value,e.style]},o),{default:()=>{var ae,le,oe,ne;return[x&&r("div",{key:"image",class:"v-navigation-drawer__img"},[a.image?(ae=a.image)==null?void 0:ae.call(a,{image:e.image}):r("img",{src:e.image,alt:""},null)]),a.prepend&&r("div",{class:"v-navigation-drawer__prepend"},[(le=a.prepend)==null?void 0:le.call(a)]),r("div",{class:"v-navigation-drawer__content"},[(oe=a.default)==null?void 0:oe.call(a)]),a.append&&r("div",{class:"v-navigation-drawer__append"},[(ne=a.append)==null?void 0:ne.call(a)])]}}),r(be,{name:"fade-transition"},{default:()=>[V.value&&(m.value||d.value)&&!!e.scrim&&r("div",{class:["v-navigation-drawer__scrim",te.backgroundColorClasses.value],style:[Ee.value,te.backgroundColorStyles.value],onClick:()=>d.value=!1},null)]})])}),{isStuck:ee}}}),Pt={components:{RegisterLoadingProgress:ht},data(){return{registerProgress:{completed:0,total:0,failed:{}},loading:!1,showRegisterLoadingProgress:!1,pageTitle:Pe.config.title,navigationDrawer:!1,navigationItems:[{title:"About this register",to:"/"},{title:"Building Blocks list",to:"/bblock"}]}},mounted(){this.showRegisterLoadingProgress=!0,this.loading=!0,Le.onRegisterLoad((e,l,o)=>{const n=Object.keys(e).length;n>0&&(this.registerProgress.total=n,this.registerProgress.completed=l,Object.assign(this.registerProgress.failed,o),n<=l&&setTimeout(()=>{this.showRegisterLoadingProgress=!1},2e3)),this.loading=!1})},computed:{mobile(){return this.$vuetify.display.mobile},navigationDrawerComputed:{get(){return!this.mobile||this.navigationDrawer},set(e){this.navigationDrawer=e}}}};function Lt(e,l,o,n,a,t){const s=re("router-view"),i=re("register-loading-progress");return T(),W(U,null,[r(bt,{image:"http://blocks.ogc.org/assets/img/lego2.jpg"},{image:S(()=>[r(lt,{gradient:"to top right, rgba(255,255,255,.8), rgba(255,255,255,.4)"})]),default:S(()=>[t.mobile?(T(),R(pt,{key:0,variant:"text",onClick:l[0]||(l[0]=G(u=>a.navigationDrawer=!a.navigationDrawer,["stop"]))})):Y("",!0),r(St,{class:"text-center",textContent:Z(a.pageTitle)},null,8,["textContent"])]),_:1}),r(Mt,{modelValue:t.navigationDrawerComputed,"onUpdate:modelValue":l[1]||(l[1]=u=>t.navigationDrawerComputed=u)},{default:S(()=>[r(ke,null,{default:S(()=>[(T(!0),W(U,null,de(a.navigationItems,(u,g)=>(T(),R(xe,{key:g,to:u.to,title:u.title},null,8,["to","title"]))),128))]),_:1})]),_:1},8,["modelValue"]),r(Vt,null,{default:S(()=>[r(s,null,{default:S(({Component:u})=>[r(be,{name:"fade",mode:"out-in"},{default:S(()=>[(T(),R(Xe(u)))]),_:2},1024)]),_:1})]),_:1}),a.showRegisterLoadingProgress?(T(),R(pe,{key:0,class:"register-loading-progress"},{default:S(()=>[r(Se,{class:"pa-1"},{default:S(()=>[r(i,X(a.registerProgress,{onHide:l[2]||(l[2]=u=>this.showRegisterLoadingProgress=!1)}),null,16)]),_:1})]),_:1})):Y("",!0),r(rt,{"model-value":a.loading,class:"align-center justify-center"},{default:S(()=>[r(_e,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"])],64)}const Dt=ve(Pt,[["render",Lt]]);const Rt=N()({name:"VApp",props:{...$(),...$e({fullHeight:!0}),...he()},setup(e,l){let{slots:o}=l;const n=we(e),{layoutClasses:a,layoutStyles:t,getLayoutItem:s,items:i,layoutRef:u}=qe(e),{rtlClasses:g}=ye();return A(()=>{var c;return r("div",{ref:u,class:["v-application",n.themeClasses.value,a.value,g.value,e.class],style:[t.value,e.style]},[r("div",{class:"v-application__wrap"},[(c=o.default)==null?void 0:c.call(o)])])}),{getLayoutItem:s,items:i,theme:n}}}),zt={__name:"Default",setup(e){return(l,o)=>(T(),R(Rt,null,{default:S(()=>[r(ot,{fluid:""},{default:S(()=>[r(Dt)]),_:1})]),_:1}))}};export{zt as default};
