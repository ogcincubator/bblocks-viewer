import{_ as me,c as Le,b as Pe,u as Ne}from"./index.js";import{o as V,j as H,k as G,l as n,c as N,n as O,p as U,t as j,w as S,q as $,u as Ie,v as A,x as J,y as De,z as _,A as b,B as T,C as Q,D as Re,E as He,G as ee,H as Y,I as ge,J as he,K as fe,L as q,M as z,N as F,O as Ae,P as Z,Q as Oe,R as W,S as Ye,T as ye,U as we,V as be,W as ze,X as We,Y as Ue,Z as je,_ as Xe,$ as pe,a0 as $e,r as ie,a1 as qe,a2 as Fe,a3 as Ze}from"./vendor.js";import{V as Ge,a as Se,b as ke,c as Je,m as Ve,d as Ke,e as Qe,f as et,u as tt,g as ue,h as at,i as lt,j as ot,k as nt,l as rt}from"./VContainer.js";import{V as X,a as _e,b as st,c as xe,d as K,u as te,e as it,f as ut,g as ct}from"./VList.js";import{V as vt,m as dt,a as ce,b as mt,c as gt}from"./VToolbar.js";import"./dialog-transition.js";const ht={props:{completed:Number,total:Number,failed:Object},data(){return{showErrorsDialog:!1}},methods:{openUrl(e){window.open(e)}},computed:{finished(){return this.completed+Object.keys(this.failed).length===this.total},hasErrors(){return this.failed&&Object.keys(this.failed).length},textColor(){return this.hasErrors?"error":this.total>0&&this.completed==this.total?"success":"primary"},textStyle(){return this.hasErrors?"color: rgb(var(--v-theme-error))":""}}},ft={key:0,class:"d-flex align-center"},yt={class:"flex-grow-1 flex-shrink-1"},wt=G("p",null,"The following errors were encountered while loading the list of building block registers:",-1);function bt(e,l,o,r,a,t){return o.total?(V(),H("div",ft,[G("div",yt,[n(Ge,{"model-value":100*o.completed/o.total,color:t.textColor},null,8,["model-value","color"])]),G("div",{class:"text-caption text-no-wrap pl-3",style:Ie(t.textStyle)},[t.finished?O("",!0):(V(),N(xe,{key:0,size:"10",indeterminate:"",class:"mr-1"})),U(" Loaded "+j(o.completed)+" / "+j(o.total)+" registers ",1),t.hasErrors?(V(),N(X,{key:1,class:"mx-2",size:"x-small",color:"error","prepend-icon":"mdi-alert-octagon",onClick:l[0]||(l[0]=s=>a.showErrorsDialog=!0)},{default:S(()=>[U(" Errors ")]),_:1})):O("",!0),n(X,{size:"x-small",onClick:l[1]||(l[1]=$(s=>this.$emit("hide"),["prevent"])),class:"mx-2"},{default:S(()=>[U("Hide")]),_:1})],4),n(vt,{modelValue:a.showErrorsDialog,"onUpdate:modelValue":l[3]||(l[3]=s=>a.showErrorsDialog=s),"max-width":"800"},{default:S(()=>[n(Se,{title:"Register load errors"},{default:S(()=>[n(ke,null,{default:S(()=>[wt,n(_e,null,{default:S(()=>[(V(!0),H(A,null,J(this.failed,(s,u)=>(V(),N(K,{title:u,subtitle:s.error.toString(),onClick:$(c=>t.openUrl(u),["prevent"])},null,8,["title","subtitle","onClick"]))),256))]),_:1})]),_:1}),n(Je,null,{default:S(()=>[n(st),n(X,{text:"Close",onClick:l[2]||(l[2]=s=>a.showErrorsDialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):O("",!0)}const pt=me(ht,[["render",bt]]);const St=De({scrollTarget:{type:String},scrollThreshold:{type:[String,Number]}},"scroll");function kt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{thresholdMetCallback:o,scrollThreshold:r,canScroll:a}=l;let t=0;const s=_(null),u=_(0),c=_(0),v=_(0),i=_(!1),h=_(!1),w=b(()=>Number(e.scrollThreshold??r??300)),y=()=>{const m=s.value;!m||a&&!a.value||(t=u.value,u.value="window"in m?m.pageYOffset:m.scrollTop,h.value=u.value<t,v.value=Math.abs(u.value-w.value))};return T(h,()=>{c.value=c.value||u.value}),T(i,()=>{c.value=0}),Q(()=>{T(()=>e.scrollTarget,m=>{var B;const E=m?document.querySelector(m):window;if(!E){Re(`Unable to locate element with identifier ${m}`,He());return}E!==s.value&&((B=s.value)==null||B.removeEventListener("scroll",y),s.value=E,s.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),ee(()=>{var m;(m=s.value)==null||m.removeEventListener("scroll",y)}),o&&T(()=>Math.abs(u.value-c.value)>w.value,m=>{m&&o({currentThreshold:v.value,isScrollingUp:h.value,savedScroll:c})},{immediate:!0}),a&&T(a,y,{immediate:!0}),{computedScrollThreshold:w,currentScroll:u,currentThreshold:v,isScrollActive:i,isScrollingUp:h,savedScroll:c}}const Vt=Y()({name:"VAppBar",props:{scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...dt(),...ge(),...St(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const r=_(),a=he(e,"modelValue"),t=b(()=>{var k;const f=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:f.has("hide"),inverted:f.has("inverted"),collapse:f.has("collapse"),elevate:f.has("elevate"),fadeImage:f.has("fade-image")}}),s=b(()=>{const f=t.value;return f.hide||f.inverted||f.collapse||f.elevate||f.fadeImage||!a.value}),{currentScroll:u,currentThreshold:c,computedScrollThreshold:v,isScrollingUp:i}=kt(e,{canScroll:s}),h=b(()=>e.collapse||t.value.collapse&&(t.value.inverted?u.value<1:u.value>0)),w=b(()=>e.flat||t.value.elevate&&u.value===(t.value.inverted?1:0)),y=b(()=>Math.min((c.value-u.value)/c.value||1,1)),m=b(()=>t.value.fadeImage?t.value.inverted?1-y.value:y.value:void 0),E=b(()=>{var d,g;if(t.value.hide&&t.value.inverted)return 0;const f=((d=r.value)==null?void 0:d.contentHeight)??0,k=((g=r.value)==null?void 0:g.extensionHeight)??0;return f+k});function B(){const f=u.value;t.value.hide?t.value.inverted?a.value=f>v.value:a.value=i.value||f<v.value:t.value.inverted?a.value=u.value===0:a.value=!0}T(u,B,{immediate:!0}),T(t,B);const{ssrBootStyles:M}=te(),{layoutItemStyles:I}=fe({id:e.name,order:b(()=>parseInt(e.order,10)),position:q(e,"location"),layoutSize:E,elementSize:_(void 0),active:a,absolute:q(e,"absolute")});return z(()=>{const[f]=ce.filterProps(e);return n(ce,F({ref:r,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...I.value,"--v-toolbar-image-opacity":m.value,height:void 0,...M.value},e.style]},f,{collapse:h.value,flat:w.value}),o)}),{}}}),_t=Y()({name:"VAppBarNavIcon",props:{icon:{type:Ae,default:"$menu"},...Z()},setup(e,l){let{slots:o}=l;return z(()=>n(X,{class:["v-app-bar-nav-icon",e.class],icon:e.icon,style:e.style},o)),{}}}),xt=Y()({name:"VAppBarTitle",props:mt(),setup(e,l){let{slots:o}=l;return z(()=>n(gt,F(e,{class:"v-app-bar-title"}),o)),{}}});const Ct=Y()({name:"VMain",props:{scrollable:Boolean,...Z(),...Ve({tag:"main"})},setup(e,l){let{slots:o}=l;const{mainStyles:r}=Oe(),{ssrBootStyles:a}=te();return z(()=>n(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[r.value,a.value,e.style]},{default:()=>{var t,s;return[e.scrollable?n("div",{class:"v-main__scroller"},[(t=o.default)==null?void 0:t.call(o)]):(s=o.default)==null?void 0:s.call(o)]}})),{}}});function Tt(e){let{rootEl:l,isSticky:o,layoutItemStyles:r}=e;const a=_(!1),t=_(0),s=b(()=>{const v=typeof a.value=="boolean"?"top":a.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,a.value?{[v]:W(t.value)}:{top:r.value.top}]});Q(()=>{T(o,v=>{v?window.addEventListener("scroll",c,{passive:!0}):window.removeEventListener("scroll",c)},{immediate:!0})}),ee(()=>{document.removeEventListener("scroll",c)});let u=0;function c(){const v=u>window.scrollY?"up":"down",i=l.value.getBoundingClientRect(),h=parseFloat(r.value.top??0),w=window.scrollY-Math.max(0,t.value-h),y=i.height+Math.max(t.value,h)-window.scrollY-window.innerHeight;i.height<window.innerHeight-h?(a.value="top",t.value=h):v==="up"&&a.value==="bottom"||v==="down"&&a.value==="top"?(t.value=window.scrollY+i.top,a.value=!0):v==="down"&&y<=0?(t.value=0,a.value="bottom"):v==="up"&&w<=0&&(t.value=i.top+w,a.value="top"),u=window.scrollY}return{isStuck:a,stickyStyles:s}}const Et=100,Bt=20;function ve(e){const l=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*l}function de(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let l=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const r=ve(l),a=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);l+=(a-r)*Math.abs(a),o===e.length-1&&(l*=.5)}return ve(l)*1e3}function Mt(){const e={};function l(a){Array.from(a.changedTouches).forEach(t=>{(e[t.identifier]??(e[t.identifier]=new Ye(Bt))).push([a.timeStamp,t])})}function o(a){Array.from(a.changedTouches).forEach(t=>{delete e[t.identifier]})}function r(a){var v;const t=(v=e[a])==null?void 0:v.values().reverse();if(!t)throw new Error(`No samples for touch id ${a}`);const s=t[0],u=[],c=[];for(const i of t){if(s[0]-i[0]>Et)break;u.push({t:i[0],d:i[1].clientX}),c.push({t:i[0],d:i[1].clientY})}return{x:de(u),y:de(c),get direction(){const{x:i,y:h}=this,[w,y]=[Math.abs(i),Math.abs(h)];return w>y&&i>=0?"right":w>y&&i<=0?"left":y>w&&h>=0?"down":y>w&&h<=0?"up":Lt()}}}return{addMovement:l,endTouch:o,getVelocity:r}}function Lt(){throw new Error}function Pt(e){let{isActive:l,isTemporary:o,width:r,touchless:a,position:t}=e;Q(()=>{window.addEventListener("touchstart",M,{passive:!0}),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",f,{passive:!0})}),ee(()=>{window.removeEventListener("touchstart",M),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",f)});const s=b(()=>["left","right"].includes(t.value)),{addMovement:u,endTouch:c,getVelocity:v}=Mt();let i=!1;const h=_(!1),w=_(0),y=_(0);let m;function E(d,g){return(t.value==="left"?d:t.value==="right"?document.documentElement.clientWidth-d:t.value==="top"?d:t.value==="bottom"?document.documentElement.clientHeight-d:R())-(g?r.value:0)}function B(d){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const p=t.value==="left"?(d-y.value)/r.value:t.value==="right"?(document.documentElement.clientWidth-d-y.value)/r.value:t.value==="top"?(d-y.value)/r.value:t.value==="bottom"?(document.documentElement.clientHeight-d-y.value)/r.value:R();return g?Math.max(0,Math.min(1,p)):p}function M(d){if(a.value)return;const g=d.changedTouches[0].clientX,p=d.changedTouches[0].clientY,x=25,L=t.value==="left"?g<x:t.value==="right"?g>document.documentElement.clientWidth-x:t.value==="top"?p<x:t.value==="bottom"?p>document.documentElement.clientHeight-x:R(),P=l.value&&(t.value==="left"?g<r.value:t.value==="right"?g>document.documentElement.clientWidth-r.value:t.value==="top"?p<r.value:t.value==="bottom"?p>document.documentElement.clientHeight-r.value:R());(L||P||l.value&&o.value)&&(i=!0,m=[g,p],y.value=E(s.value?g:p,l.value),w.value=B(s.value?g:p),c(d),u(d))}function I(d){const g=d.changedTouches[0].clientX,p=d.changedTouches[0].clientY;if(i){if(!d.cancelable){i=!1;return}const L=Math.abs(g-m[0]),P=Math.abs(p-m[1]);(s.value?L>P&&L>3:P>L&&P>3)?(h.value=!0,i=!1):(s.value?P:L)>3&&(i=!1)}if(!h.value)return;d.preventDefault(),u(d);const x=B(s.value?g:p,!1);w.value=Math.max(0,Math.min(1,x)),x>1?y.value=E(s.value?g:p,!0):x<0&&(y.value=E(s.value?g:p,!1))}function f(d){if(i=!1,!h.value)return;u(d),h.value=!1;const g=v(d.changedTouches[0].identifier),p=Math.abs(g.x),x=Math.abs(g.y);(s.value?p>x&&p>400:x>p&&x>3)?l.value=g.direction===({left:"right",right:"left",top:"down",bottom:"up"}[t.value]||R()):l.value=w.value>.5}const k=b(()=>h.value?{transform:t.value==="left"?`translateX(calc(-100% + ${w.value*r.value}px))`:t.value==="right"?`translateX(calc(100% - ${w.value*r.value}px))`:t.value==="top"?`translateY(calc(-100% + ${w.value*r.value}px))`:t.value==="bottom"?`translateY(calc(100% - ${w.value*r.value}px))`:R(),transition:"none"}:void 0);return{isDragging:h,dragProgress:w,dragStyles:k}}function R(){throw new Error}const Nt=["start","end","left","right","top","bottom"],It=Y()({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Nt.includes(e)},sticky:Boolean,...Ke(),...Z(),...Qe(),...ge(),...et(),...Ve({tag:"nav"}),...ye()},emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,l){let{attrs:o,emit:r,slots:a}=l;const{isRtl:t}=we(),{themeClasses:s}=be(e),{borderClasses:u}=tt(e),{backgroundColorClasses:c,backgroundColorStyles:v}=ue(q(e,"color")),{elevationClasses:i}=at(e),{mobile:h}=ze(),{roundedClasses:w}=lt(e),y=ot(),m=he(e,"modelValue",null,C=>!!C),{ssrBootStyles:E}=te(),B=_(),M=_(!1),I=b(()=>e.rail&&e.expandOnHover&&M.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),f=b(()=>We(e.location,t.value)),k=b(()=>!e.permanent&&(h.value||e.temporary)),d=b(()=>e.sticky&&!k.value&&f.value!=="bottom");e.expandOnHover&&e.rail!=null&&T(M,C=>r("update:rail",!C)),e.disableResizeWatcher||T(k,C=>!e.permanent&&Ue(()=>m.value=!C)),!e.disableRouteWatcher&&y&&T(y.currentRoute,()=>k.value&&(m.value=!1)),T(()=>e.permanent,C=>{C&&(m.value=!0)}),je(()=>{e.modelValue!=null||k.value||(m.value=e.permanent||!h.value)});const{isDragging:g,dragProgress:p,dragStyles:x}=Pt({isActive:m,isTemporary:k,width:I,touchless:q(e,"touchless"),position:f}),L=b(()=>{const C=k.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):I.value;return g.value?C*p.value:C}),{layoutItemStyles:P,layoutRect:D,layoutItemScrimStyles:Ce}=fe({id:e.name,order:b(()=>parseInt(e.order,10)),position:f,layoutSize:L,elementSize:I,active:b(()=>m.value||g.value),disableTransitions:b(()=>g.value),absolute:b(()=>e.absolute||d.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:Te}=Tt({rootEl:B,isSticky:d,layoutItemStyles:P}),le=ue(b(()=>typeof e.scrim=="string"?e.scrim:null)),Ee=b(()=>({...g.value?{opacity:p.value*.2,transition:"none"}:void 0,...D.value?{left:W(D.value.left),right:W(D.value.right),top:W(D.value.top),bottom:W(D.value.bottom)}:void 0,...Ce.value}));Xe({VList:{bgColor:"transparent"}});function Be(){M.value=!0}function Me(){M.value=!1}return z(()=>{const C=a.image||e.image;return n(A,null,[n(e.tag,F({ref:B,onMouseenter:Be,onMouseleave:Me,class:["v-navigation-drawer",`v-navigation-drawer--${f.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":M.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":k.value,"v-navigation-drawer--active":m.value,"v-navigation-drawer--sticky":d.value},s.value,c.value,u.value,i.value,w.value,e.class],style:[v.value,P.value,x.value,E.value,Te.value,e.style]},o),{default:()=>{var oe,ne,re,se;return[C&&n("div",{key:"image",class:"v-navigation-drawer__img"},[a.image?(oe=a.image)==null?void 0:oe.call(a,{image:e.image}):n("img",{src:e.image,alt:""},null)]),a.prepend&&n("div",{class:"v-navigation-drawer__prepend"},[(ne=a.prepend)==null?void 0:ne.call(a)]),n("div",{class:"v-navigation-drawer__content"},[(re=a.default)==null?void 0:re.call(a)]),a.append&&n("div",{class:"v-navigation-drawer__append"},[(se=a.append)==null?void 0:se.call(a)])]}}),n(pe,{name:"fade-transition"},{default:()=>[k.value&&(g.value||m.value)&&!!e.scrim&&n("div",{class:["v-navigation-drawer__scrim",le.backgroundColorClasses.value],style:[Ee.value,le.backgroundColorStyles.value],onClick:()=>m.value=!1},null)]})])}),{isStuck:ae}}}),Dt={components:{RegisterLoadingProgress:pt},data(){return{registerProgress:{completed:0,total:0,failed:{}},loading:!1,showRegisterLoadingProgress:!1,pageTitle:Le.config.title,navigationDrawer:!1,navigationItems:[{title:"About this register",to:"/"},{title:"Building Blocks list",to:"/bblock"}]}},mounted(){this.showRegisterLoadingProgress=!0,this.loading=!0,Pe.onRegisterLoad((e,l,o)=>{const r=Object.keys(e).length;r>0&&(this.registerProgress.total=r,this.registerProgress.completed=l,Object.assign(this.registerProgress.failed,o),r<=l&&setTimeout(()=>{this.showRegisterLoadingProgress=!1},2e3)),this.loading=!1})},methods:{handleContextNavigationClick(e){this.contextNavHandler&&this.contextNavHandler(e)}},computed:{mobile(){return this.$vuetify.display.mobile},navigationDrawerComputed:{get(){return!this.mobile||this.navigationDrawer},set(e){this.navigationDrawer=e}},...$e(Ne,{contextNavItems:"items",contextNavHandler:"handler"})}};function Rt(e,l,o,r,a,t){const s=ie("router-view"),u=ie("register-loading-progress");return V(),H(A,null,[n(Vt,{image:"http://blocks.ogc.org/assets/img/lego2.jpg"},{image:S(()=>[n(nt,{gradient:"to top right, rgba(255,255,255,.8), rgba(255,255,255,.4)"})]),default:S(()=>[t.mobile?(V(),N(_t,{key:0,variant:"text",onClick:l[0]||(l[0]=$(c=>a.navigationDrawer=!a.navigationDrawer,["stop"]))})):O("",!0),n(xt,{class:"text-center",textContent:j(a.pageTitle)},null,8,["textContent"])]),_:1}),n(It,{modelValue:t.navigationDrawerComputed,"onUpdate:modelValue":l[1]||(l[1]=c=>t.navigationDrawerComputed=c)},{default:S(()=>[U(j(e.contextNavigation)+" ",1),n(_e,null,{default:S(()=>{var c;return[(V(!0),H(A,null,J(a.navigationItems,(v,i)=>(V(),N(K,{key:i,to:v.to,title:v.title},null,8,["to","title"]))),128)),(c=e.contextNavItems)!=null&&c.length?(V(),H(A,{key:0},[n(it,{title:"On this page"}),(V(!0),H(A,null,J(e.contextNavItems,(v,i)=>(V(),N(K,{key:i,onClick:$(h=>t.handleContextNavigationClick(v),["prevent"]),density:"compact"},{default:S(()=>[n(ut,{style:{"font-size":"90%"}},{default:S(()=>[U(j(v.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64)):O("",!0)]}),_:1})]),_:1},8,["modelValue"]),n(Ct,null,{default:S(()=>[n(s,null,{default:S(({Component:c})=>[n(pe,{name:"fade",mode:"out-in"},{default:S(()=>[(V(),N(qe(c)))]),_:2},1024)]),_:1})]),_:1}),a.showRegisterLoadingProgress?(V(),N(Se,{key:0,class:"register-loading-progress"},{default:S(()=>[n(ke,{class:"pa-1"},{default:S(()=>[n(u,F(a.registerProgress,{onHide:l[2]||(l[2]=c=>this.showRegisterLoadingProgress=!1)}),null,16)]),_:1})]),_:1})):O("",!0),n(ct,{"model-value":a.loading,class:"align-center justify-center"},{default:S(()=>[n(xe,{color:"primary",indeterminate:"",size:"64"})]),_:1},8,["model-value"])],64)}const Ht=me(Dt,[["render",Rt]]);const At=Y()({name:"VApp",props:{...Z(),...Fe({fullHeight:!0}),...ye()},setup(e,l){let{slots:o}=l;const r=be(e),{layoutClasses:a,layoutStyles:t,getLayoutItem:s,items:u,layoutRef:c}=Ze(e),{rtlClasses:v}=we();return z(()=>{var i;return n("div",{ref:c,class:["v-application",r.themeClasses.value,a.value,v.value,e.class],style:[t.value,e.style]},[n("div",{class:"v-application__wrap"},[(i=o.default)==null?void 0:i.call(o)])])}),{getLayoutItem:s,items:u,theme:r}}}),Xt={__name:"Default",setup(e){return(l,o)=>(V(),N(At,null,{default:S(()=>[n(rt,{fluid:""},{default:S(()=>[n(Ht)]),_:1})]),_:1}))}};export{Xt as default};
