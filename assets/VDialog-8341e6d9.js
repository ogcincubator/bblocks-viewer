import{l as B,m as h,y,T as w,x as D,r as T,aw as A,w as x,c as F,B as C,ax as O}from"./index-a76e1bdc.js";import{l as p,D as L,s as E,E as R,n as q,w as I,x as M,f as P,i as N}from"./VList-a5978676.js";import{u as W,i as X}from"./VContainer-64a6b5b1.js";const Y=B()({name:"VDialogTransition",props:{target:Object},setup(o,f){let{slots:e}=f;const l={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,r){var c;await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),t.style.visibility="";const{x:d,y:m,sx:s,sy:a,speed:n}=b(o.target,t),u=p(t,[{transform:`translate(${d}px, ${m}px) scale(${s}, ${a})`,opacity:0},{}],{duration:225*n,easing:L});(c=V(t))==null||c.forEach(i=>{p(i,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*n,easing:E})}),u.finished.then(()=>r())},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,r){var c;await new Promise(i=>requestAnimationFrame(i));const{x:d,y:m,sx:s,sy:a,speed:n}=b(o.target,t);p(t,[{},{transform:`translate(${d}px, ${m}px) scale(${s}, ${a})`,opacity:0}],{duration:125*n,easing:R}).finished.then(()=>r()),(c=V(t))==null||c.forEach(i=>{p(i,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*n,easing:E})})},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>o.target?h(w,y({name:"dialog-transition"},l,{css:!1}),e):h(w,{name:"dialog-transition"},e)}});function V(o){var e;const f=(e=o.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:e.children;return f&&[...f]}function b(o,f){const e=o.getBoundingClientRect(),l=q(f),[t,r]=getComputedStyle(f).transformOrigin.split(" ").map($=>parseFloat($)),[d,m]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let s=e.left+e.width/2;d==="left"||m==="left"?s-=e.width/2:(d==="right"||m==="right")&&(s+=e.width/2);let a=e.top+e.height/2;d==="top"||m==="top"?a-=e.height/2:(d==="bottom"||m==="bottom")&&(a+=e.height/2);const n=e.width/l.width,u=e.height/l.height,c=Math.max(1,n,u),i=n/c||0,g=u/c||0,v=l.width*l.height/(window.innerWidth*window.innerHeight),S=v>.12?Math.min(1.5,(v-.12)*10+1):1;return{x:s-(t+l.left),y:a-(r+l.top),sx:i,sy:g,speed:S}}const U=B()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...I({origin:"center center",scrollStrategy:"block",transition:{component:Y},zIndex:2400})},emits:{"update:modelValue":o=>!0},setup(o,f){let{slots:e}=f;const l=D(o,"modelValue"),{scopeId:t}=M(),r=T();function d(s){var u,c;const a=s.relatedTarget,n=s.target;if(a!==n&&((u=r.value)!=null&&u.contentEl)&&((c=r.value)!=null&&c.globalTop)&&![document,r.value.contentEl].includes(n)&&!r.value.contentEl.contains(n)){const i=O(r.value.contentEl);if(!i.length)return;const g=i[0],v=i[i.length-1];a===g?v.focus():g.focus()}}A&&x(()=>l.value&&o.retainFocus,s=>{s?document.addEventListener("focusin",d):document.removeEventListener("focusin",d)},{immediate:!0}),x(l,async s=>{var a,n;await C(),s?(a=r.value.contentEl)==null||a.focus({preventScroll:!0}):(n=r.value.activatorEl)==null||n.focus({preventScroll:!0})});const m=F(()=>y({"aria-haspopup":"dialog","aria-expanded":String(l.value)},o.activatorProps));return W(()=>{const[s]=P.filterProps(o);return h(P,y({ref:r,class:["v-dialog",{"v-dialog--fullscreen":o.fullscreen,"v-dialog--scrollable":o.scrollable},o.class],style:o.style},s,{modelValue:l.value,"onUpdate:modelValue":a=>l.value=a,"aria-modal":"true",activatorProps:m.value,role:"dialog"},t),{activator:e.activator,default:function(){for(var a=arguments.length,n=new Array(a),u=0;u<a;u++)n[u]=arguments[u];return h(X,{root:!0},{default:()=>{var c;return[(c=e.default)==null?void 0:c.call(e,...n)]}})}})}),N({},r)}});export{Y as V,U as a};
