const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webfontloader.js","assets/vendor.js","assets/Default.js","assets/VContainer.js","assets/VContainer.css","assets/VList.js","assets/VList.css","assets/VToolbar.js","assets/dialog-transition.js","assets/VToolbar.css","assets/Default.css","assets/Home.js","assets/VTooltip.js","assets/VTooltip.css","assets/VRow.js","assets/Home.css","assets/NotFound.js","assets/BuildingBlockList.js","assets/VExpansionPanel.js","assets/VExpansionPanel.css","assets/BuildingBlockList.css","assets/BuildingBlock.js","assets/BuildingBlock.css"])))=>i.map(i=>d[i]);
import{c as A,r as L,o as D,a as O,m as T,b as j,F as U,s as E,d as x,e as F,f as V,g as M,h as N}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const q=(r,e)=>{const t=r.__vccOpts||r;for(const[i,s]of e)t[i]=s;return t},$={};function K(r,e){const t=L("router-view");return D(),A(t)}const G=q($,[["render",K]]),H="modulepreload",Q=function(r){return"/@BASE_URL@/"+r},v={},u=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),b=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(t.map(l=>{if(l=Q(l),l in v)return;v[l]=!0;const m=l.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":H,m||(f.as="script"),f.crossOrigin="",f.href=l,b&&f.setAttribute("nonce",b),document.head.appendChild(f),m)return new Promise((I,S)=>{f.addEventListener("load",I),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};async function W(){(await u(()=>import("./webfontloader.js").then(e=>e.w),__vite__mapDeps([0,1]))).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const z=O({theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6"}}}}}),c=window.bblocksViewer||{},C=new URLSearchParams(window.location.search);let h;const _=C.getAll("register");_!=null&&_.length&&(h=_.pop());h||(h=window.bblocksRegister||window.bblocksRegisters,Array.isArray(h)&&(h=h[0]));h||(h="https://opengeospatial.github.io/bblocks/register.json");let d=C.get("showImported");d||(d=void 0);if(d)if(typeof d=="number"||!isNaN(parseInt(d))){const r=parseInt(d);c.showImported=r<0?!0:r}else c.showImported=["true","on","all"].includes(d);(typeof c.showImported>"u"||c.showImported===!1)&&(c.showImported=0);c.title||(c.title="OGC Location Building Blocks");document.title=c.title;c.baseUrl||(c.baseUrl="/@BASE_URL@/");const y={config:c,register:h},Y=["#4363d8","#e6194b","#297a32","#75670b","#f58231","#911eb4","#30a5a5","#f032e6","#85ab08","#997474","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#000000"],J=(r=Y)=>{const e={},t=new Set;return i=>(t.has(i)||(e[i]=r[t.size%r.length],t.add(i)),e[i])};function de(r,e){let t;return function(...i){t&&clearTimeout(t);const s=this;t=setTimeout(()=>{r.apply(s,i)},e)}}function me(r,e=null){let t=T(r);if(e){const i=new DOMParser().parseFromString(t,"text/html");t=X(i,e).body.innerHTML}return t}function X(r,e){return e&&(e.endsWith("/")||(e+="/"),r.querySelectorAll("[src],[href]").forEach(t=>{for(let i of["src","href"])if(t[i])try{const s=t.getAttribute(i),n=new URL(s,e);t.setAttribute(i,n.toString())}catch{}})),r}function ge(r){var t;r.preventDefault();let e=null;(t=r.target)!=null&&t.href?e=r.target.href:r.target.tagName.toLowerCase()==="img"&&(e=r.target.src),e&&window.open(e)}function pe(r){navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(r)}function w(){const r={resolve:null,reject:null};return r.promise=new Promise((e,t)=>Object.assign(r,{resolve:e,reject:t})),r}const Z=j.create({timeout:3e3}),ee=U(Z,{cacheTakeover:!1}),te={client:ee},se="https://opengeospatial.github.io/bblocks/register.json",re="default",oe=["local","register","importLevel"],ie=J(),p=te.client;class ne{constructor(){this._registerLoadCallbacks=[],this.localRegister=null,this.registers={},this.registerPromises={local:w(),all:w()},this.errorRegisters={},this.loadedRegistersCount=0,this.bblocks={local:{},all:{}},this.bblockPromises={local:w(),all:w()},this.resourceMappings={},this._loadRegister(y.register,!0)}async _loadRegister(e,t,i=0){return e===re&&(e=se),this.registers[e]?new Promise(()=>!0):(this.registers[e]={},p.get(e).catch(s=>{var o;this.errorRegisters[e]={error:s};let n=(o=this.localRegister)==null?void 0:o.remoteCacheDir;if(n){const a=E.sha256(e);return n.slice(-1)!=="/"&&(n+="/"),p.get(n+a).then(b=>({fromCache:!0,response:b}))}throw s}).then(s=>{const n=s.fromCache||!1;n&&(s=s.response);let o=[];return Array.isArray(s.data)?this.registers[e]={local:t,url:e,importLevel:i,bblocks:s.data,fromCache:n}:(this.registers[e]={...s.data,local:t,url:e,importLevel:i,fromCache:n},Array.isArray(s.data.imports)&&(o=s.data.imports)),this.registers[e].color=ie(e),this.registers[e].name||(this.registers[e].name=e.replace(/(\/build)?\/[^/]+\.json$/,"").replace(/^.*\//,"")),t&&(this.localRegister=this.registers[e]),o!=null&&o.length&&o.filter(a=>!this.registers[a]).forEach(a=>this._loadRegister(a,!1,i+1)),e}).then(s=>{const n=this.registers[s].bblocks;for(let o of n){if(o.local=t,o.importLevel=i,o.register={url:s,name:this.registers[s].name,color:this.registers[s].color},this.bblocks.all[o.itemIdentifier]=o,t&&(this.bblocks.local[o.itemIdentifier]=o),o.schema){for(let a of Object.values(o.schema))this.resourceMappings[a]=o.itemIdentifier;o.sourceSchema&&(this.resourceMappings[o.sourceSchema]=o.itemIdentifier)}o.openAPIDocument&&(console.log("adding",o.openAPIDocument),this.resourceMappings[o.openAPIDocument]=o.itemIdentifier,o.sourceOpenAPIDocument&&(this.resourceMappings[o.sourceOpenAPIDocument]=o.itemIdentifier))}return this.loadedRegistersCount++,t&&(this.bblockPromises.local.resolve(this.bblocks.local),this.registerPromises.local.resolve(this.localRegister)),this.loadedRegistersCount===Object.keys(this.registers).length&&(this.bblockPromises.all.resolve(this.bblocks.all),this.registerPromises.all.resolve(this.registers)),n}).catch(s=>{console.log("Error loading register",s),this.errorRegisters[e]={error:s}}).finally(()=>{this._onRegisterLoad()}))}getBBlocks(e=!1){return e?this.bblockPromises.all.promise:this.bblockPromises.local.promise}_onRegisterLoad(){this._registerLoadCallbacks.length&&this._registerLoadCallbacks.forEach(e=>e(this.registers,this.loadedRegistersCount,this.errorRegisters))}onRegisterLoad(e){e&&(this._registerLoadCallbacks.push(e),Object.keys(this.registers).length&&e(this.registers,this.loadedRegistersCount,this.errorRegisters))}async fetchBBlock(e){let t=await this.bblockPromises.local.promise;t[e]||(t=await this.bblockPromises.all.promise);const i=t[e],s=i.documentation["json-full"].url,o=(await p.get(s)).data;return oe.forEach(a=>o[a]=i[a]),o}getRegisters(e=!1){return e?this.registerPromises.all.promise:this.registerPromises.local.promise}async fetchLdContext(e){return this.fetchDocument(e,"ldContext")}async fetchSourceLdContext(e){return this.fetchDocument(e,"sourceLdContext")}async fetchSourceSchema(e){return this.fetchDocument(e,"sourceSchema")}fetchDocument(e,t){let i;if(t=t.slice(),Array.isArray(t))for(i=e[t.shift()];i&&t.length;)i=i[t.shift()];else i=e[t];return i?this.fetchDocumentByUrl(e,i):Promise.resolve(null)}fetchDocumentByUrl(e,t){return p.get(t,{responseType:"text"}).catch(i=>{if(e.remoteCacheDir){const s=E.sha256(t);let n=e.remoteCacheDir;return n.slice(-1)!=="/"&&(n+="/"),p.get(n+s)}throw i}).then(i=>i.data)}isShown(e){const t=y.config.showImported;return t===!0||e===0||e.importLevel===0||e.local?!0:t?typeof e=="number"?t>=e:e.local||t>=e.importLevel:!1}async findResource(e){if(await this.registerPromises.all.promise,this.resourceMappings[e])return this.bblocks.all[this.resourceMappings[e]]}}const k=new ne,ae=x("navigation",{state:()=>({items:[],handler:null}),actions:{clearItems(){this.items=[],this.handler=null},setItems(r,e){console.log("setting new items"),this.items=r,this.handler=e}}}),ce=[{path:"/",component:()=>u(()=>import("./Default.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])),children:[{path:"",name:"Home",component:()=>u(()=>import("./Home.js"),__vite__mapDeps([11,12,1,5,3,4,6,13,14,15]))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>u(()=>import("./NotFound.js"),__vite__mapDeps([16,3,1,4,14]))}]},{path:"/bblock",component:()=>u(()=>import("./Default.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])),children:[{path:"",name:"BuildingBlockList",component:()=>u(()=>import("./BuildingBlockList.js"),__vite__mapDeps([17,18,1,5,3,4,6,8,19,14,20]))},{path:":id/:section?",name:"BuildingBlock",component:()=>u(()=>import("./BuildingBlock.js"),__vite__mapDeps([21,1,18,5,3,4,6,8,19,14,7,9,12,13,22])),beforeEnter:async r=>{const e=await k.getBBlocks(y.config.showImported);if(!e[r.params.id]||!k.isShown(e[r.params.id]))return"404";if(r.params.section==="json-ld")return{name:"BuildingBlock",params:{id:r.params.id,section:"semantic-uplift"}}}}]}],le=(r,e,t)=>{const i=Object.entries(e.query).filter(s=>!r.query.hasOwnProperty(s[0]));if(!i.length)t();else{const s=Object.assign(Object.fromEntries(i),r.query);t({...r,query:s})}},he=(r,e)=>{if(r.name==="BuildingBlock"&&e.name==="BuildingBlock"&&r.params.id===e.params.id)return;ae().clearItems()},R=F({history:V(y.config.baseUrl),routes:ce});R.beforeEach(le);R.beforeEach(he);function fe(r){W(),r.use(M()).use(z).use(R)}var P={gitInfo:{shortCommitId:"2b345a9",date:"2025-07-11T10:32:34+02:00"}};const B=N(G);fe(B);P.gitInfo&&console.log(`BBlocks Viewer revision ${P.gitInfo.shortCommitId} (updated ${P.gitInfo.date})`);B.mount("#app");export{q as _,u as a,k as b,y as c,de as d,pe as e,ge as i,me as m,X as s,ae as u};
