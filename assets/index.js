const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webfontloader.js","assets/vendor.js","assets/Default.js","assets/VContainer.js","assets/VContainer.css","assets/VList.js","assets/VList.css","assets/VToolbar.js","assets/dialog-transition.js","assets/VToolbar.css","assets/Default.css","assets/Home.js","assets/CopyToClipboardButton.js","assets/VTooltip.js","assets/VTooltip.css","assets/CopyToClipboardButton.css","assets/VRow.js","assets/Home.css","assets/NotFound.js","assets/BuildingBlockList.js","assets/VExpansionPanel.js","assets/VExpansionPanel.css","assets/BuildingBlockList.css","assets/BuildingBlock.js","assets/BuildingBlock.css"])))=>i.map(i=>d[i]);
import{c as A,r as L,o as D,a as O,m as T,b as j,s as U,d as E,e as x,f as V,g as F,h as M,i as $}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const q=(i,e)=>{const t=i.__vccOpts||i;for(const[o,r]of e)t[o]=r;return t},N={};function K(i,e){const t=L("router-view");return D(),A(t)}const G=q(N,[["render",K]]),H="modulepreload",Q=function(i){return"/@BASE_URL@/"+i},v={},u=function(e,t,o){let r=Promise.resolve();if(t&&t.length>0){let s=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),y=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=s(t.map(l=>{if(l=Q(l),l in v)return;v[l]=!0;const d=l.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":H,d||(f.as="script"),f.crossOrigin="",f.href=l,y&&f.setAttribute("nonce",y),document.head.appendChild(f),d)return new Promise((C,I)=>{f.addEventListener("load",C),f.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};async function W(){(await u(()=>import("./webfontloader.js").then(e=>e.w),__vite__mapDeps([0,1]))).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const z=O({theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6"}}}}}),c=window.bblocksViewer||{},S=new URLSearchParams(window.location.search);let h;const w=S.getAll("register");w!=null&&w.length&&(h=w.pop());h||(h=window.bblocksRegister||window.bblocksRegisters,Array.isArray(h)&&(h=h[0]));h||(h="https://opengeospatial.github.io/bblocks/register.json");let m=S.get("showImported");m||(m=void 0);if(m)if(typeof m=="number"||!isNaN(parseInt(m))){const i=parseInt(m);c.showImported=i<0?!0:i}else c.showImported=["true","on","all"].includes(m);(typeof c.showImported>"u"||c.showImported===!1)&&(c.showImported=0);c.title||(c.title="OGC Location Building Blocks");document.title=c.title;c.baseUrl||(c.baseUrl="/@BASE_URL@/");const g={config:c,register:h},Y=["#4363d8","#e6194b","#297a32","#75670b","#f58231","#911eb4","#30a5a5","#f032e6","#85ab08","#997474","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#000000"],J=(i=Y)=>{const e={},t=new Set;return o=>(t.has(o)||(e[o]=i[t.size%i.length],t.add(o)),e[o])};function me(i,e){let t;return function(...o){t&&clearTimeout(t);const r=this;t=setTimeout(()=>{i.apply(r,o)},e)}}function de(i,e=null){let t=T(i);if(e){const o=new DOMParser().parseFromString(t,"text/html");t=X(o,e).body.innerHTML}return t}function X(i,e){return e&&(e.endsWith("/")||(e+="/"),i.querySelectorAll("[src],[href]").forEach(t=>{for(let o of["src","href"])if(t[o])try{const r=t.getAttribute(o),n=new URL(r,e);t.setAttribute(o,n.toString())}catch{}})),i}function ge(i){navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(i)}function R(){const i={resolve:null,reject:null};return i.promise=new Promise((e,t)=>Object.assign(i,{resolve:e,reject:t})),i}const Z=j.create({timeout:3e3}),ee=U(Z,{cacheTakeover:!1}),te={client:ee},se="https://opengeospatial.github.io/bblocks/register.json",re="default",ie=["local","register","importLevel"],oe=J(),b=te.client;class ne{constructor(){this._registerLoadCallbacks=[],this.localRegister=null,this.registers={},this.registerPromises={local:R(),all:R()},this.errorRegisters={},this.loadedRegistersCount=0,this.bblocks={local:{},all:{}},this.bblockPromises={local:R(),all:R()},this.resourceMappings={},this._loadRegister(g.register,!0)}async _loadRegister(e,t,o=0){return e===re&&(e=se),this.registers[e]?new Promise(()=>!0):(this.registers[e]={},b.get(e).catch(r=>{var s;this.errorRegisters[e]={error:r};let n=(s=this.localRegister)==null?void 0:s.remoteCacheDir;if(n){const a=E.sha256(e);return n.slice(-1)!=="/"&&(n+="/"),b.get(n+a).then(y=>({fromCache:!0,response:y}))}throw r}).then(r=>{const n=r.fromCache||!1;n&&(r=r.response);let s=[];return Array.isArray(r.data)?this.registers[e]={local:t,url:e,importLevel:o,bblocks:r.data,fromCache:n}:(this.registers[e]={...r.data,local:t,url:e,importLevel:o,fromCache:n},Array.isArray(r.data.imports)&&(s=r.data.imports)),this.registers[e].color=oe(e),this.registers[e].name||(this.registers[e].name=e.replace(/(\/build)?\/[^/]+\.json$/,"").replace(/^.*\//,"")),t&&(this.localRegister=this.registers[e]),s!=null&&s.length&&s.filter(a=>!this.registers[a]).forEach(a=>this._loadRegister(a,!1,o+1)),e}).then(r=>{const n=this.registers[r].bblocks;for(let s of n)if(!(s.itemIdentifier in this.bblocks.all)){if(s.local=t,s.importLevel=o,s.register={url:r,name:this.registers[r].name,color:this.registers[r].color},this.bblocks.all[s.itemIdentifier]=s,t&&(this.bblocks.local[s.itemIdentifier]=s),s.schema){for(let a of Object.values(s.schema))this.resourceMappings[a]=s.itemIdentifier;s.sourceSchema&&(this.resourceMappings[s.sourceSchema]=s.itemIdentifier)}s.openAPIDocument&&(console.log("adding",s.openAPIDocument),this.resourceMappings[s.openAPIDocument]=s.itemIdentifier,s.sourceOpenAPIDocument&&(this.resourceMappings[s.sourceOpenAPIDocument]=s.itemIdentifier)),s.shaclRules&&!s.shaclShapes&&(s.shaclShapes=s.shaclRules,delete s.shaclRules)}return this.loadedRegistersCount++,t&&(this.bblockPromises.local.resolve(this.bblocks.local),this.registerPromises.local.resolve(this.localRegister)),this.loadedRegistersCount===Object.keys(this.registers).length&&(this.bblockPromises.all.resolve(this.bblocks.all),this.registerPromises.all.resolve(this.registers)),n}).catch(r=>{console.log("Error loading register",r),this.errorRegisters[e]={error:r}}).finally(()=>{this._onRegisterLoad()}))}getBBlocks(e=!1){return e?this.bblockPromises.all.promise:this.bblockPromises.local.promise}_onRegisterLoad(){this._registerLoadCallbacks.length&&this._registerLoadCallbacks.forEach(e=>e(this.registers,this.loadedRegistersCount,this.errorRegisters))}onRegisterLoad(e){e&&(this._registerLoadCallbacks.push(e),Object.keys(this.registers).length&&e(this.registers,this.loadedRegistersCount,this.errorRegisters))}async fetchBBlock(e){let t=await this.bblockPromises.local.promise;t[e]||(t=await this.bblockPromises.all.promise);const o=t[e],r=o.documentation["json-full"].url,s=(await b.get(r)).data;return s.shaclRules&&!s.shaclShapes&&(s.shaclShapes=s.shaclRules,delete s.shaclRules),ie.forEach(a=>s[a]=o[a]),s}getRegisters(e=!1){return e?this.registerPromises.all.promise:this.registerPromises.local.promise}async fetchLdContext(e){return this.fetchDocument(e,"ldContext")}async fetchSourceLdContext(e){return this.fetchDocument(e,"sourceLdContext")}async fetchSourceSchema(e){return this.fetchDocument(e,"sourceSchema")}fetchDocument(e,t){let o;if(t=t.slice(),Array.isArray(t))for(o=e[t.shift()];o&&t.length;)o=o[t.shift()];else o=e[t];return o?this.fetchDocumentByUrl(e,o):Promise.resolve(null)}fetchDocumentByUrl(e,t){return b.get(t,{responseType:"text"}).catch(o=>{if(e.remoteCacheDir){const r=E.sha256(t);let n=e.remoteCacheDir;return n.slice(-1)!=="/"&&(n+="/"),b.get(n+r)}throw o}).then(o=>o.data)}isShown(e){const t=g.config.showImported;return t===!0||e===0||e.importLevel===0||e.local?!0:t?typeof e=="number"?t>=e:e.local||t>=e.importLevel:!1}async findResource(e){if(await this.registerPromises.all.promise,this.resourceMappings[e])return this.bblocks.all[this.resourceMappings[e]]}}const k=new ne,ae=x("navigation",{state:()=>({items:[],handler:null}),actions:{clearItems(){this.items=[],this.handler=null},setItems(i,e){console.log("setting new items"),this.items=i,this.handler=e}}}),ce=[{path:"/",component:()=>u(()=>import("./Default.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])),children:[{path:"",name:"Home",component:()=>u(()=>import("./Home.js"),__vite__mapDeps([11,12,1,3,4,5,6,13,14,15,16,17]))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>u(()=>import("./NotFound.js"),__vite__mapDeps([18,3,1,4,16]))}]},{path:"/bblock",component:()=>u(()=>import("./Default.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])),children:[{path:"",name:"BuildingBlockList",component:()=>u(()=>import("./BuildingBlockList.js"),__vite__mapDeps([19,20,1,5,3,4,6,8,21,13,14,16,22]))},{path:":id/:section?",name:"BuildingBlock",component:()=>u(()=>import("./BuildingBlock.js"),__vite__mapDeps([23,1,20,5,3,4,6,8,21,16,12,13,14,15,7,9,24]))}]}],le=(i,e,t)=>{const o=Object.entries(e.query).filter(r=>!i.query.hasOwnProperty(r[0]));if(!o.length)t();else{const r=Object.assign(Object.fromEntries(o),i.query);t({...i,query:r})}},he=(i,e)=>{if(i.name==="BuildingBlock"&&e.name==="BuildingBlock"&&i.params.id===e.params.id)return;ae().clearItems()},_=V({history:F(g.config.baseUrl),routes:ce});_.beforeResolve(async(i,e,t)=>{if(i.name==="BuildingBlock"){const o=await k.getBBlocks(g.config.showImported);if(!o[i.params.id]||!k.isShown(o[i.params.id]))return t({name:"404"});if(i.meta.bblock=o[i.params.id],i.params.section==="json-ld")return{name:"BuildingBlock",params:{id:i.params.id,section:"semantic-uplift"}}}t()});_.beforeEach(le);_.beforeEach(he);_.afterEach(i=>{var e;(e=i.meta.bblock)!=null&&e.name?document.title=`${g.config.title} - ${i.meta.bblock.name}`:document.title=g.config.title});function fe(i){W(),i.use(M()).use(z).use(_)}var P={gitInfo:{shortCommitId:"0ffc8b1",date:"2025-12-02T16:35:11+01:00"}};const B=$(G);fe(B);P.gitInfo&&console.log(`BBlocks Viewer revision ${P.gitInfo.shortCommitId} (updated ${P.gitInfo.date})`);B.mount("#app");export{q as _,u as a,k as b,g as c,me as d,ge as e,de as m,X as s,ae as u};
