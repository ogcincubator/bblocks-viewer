import{r as I,o as k,c as C,a as B,m as v,b as L,F as S,s as A,d as O,e as T,f as D}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const j=(r,e)=>{const t=r.__vccOpts||r;for(const[o,s]of e)t[o]=s;return t},U={};function V(r,e){const t=I("router-view");return k(),C(t)}const M=j(U,[["render",V]]),x="modulepreload",F=function(r){return"/@BASE_URL@/"+r},w={},u=function(e,t,o){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(n=>{if(n=F(n),n in w)return;w[n]=!0;const i=n.endsWith(".css"),h=i?'[rel="stylesheet"]':"";if(!!o)for(let d=s.length-1;d>=0;d--){const m=s[d];if(m.href===n&&(!i||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${h}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":x,i||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),i)return new Promise((d,m)=>{l.addEventListener("load",d),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};async function N(){(await u(()=>import("./webfontloader.js").then(e=>e.w),["assets/webfontloader.js","assets/vendor.js"])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const q=B({theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6"}}}}}),c=window.bblocksViewer||{},R=new URLSearchParams(window.location.search);let a;const g=R.getAll("register");g!=null&&g.length&&(a=g.pop());a||(a=window.bblocksRegister||window.bblocksRegisters,Array.isArray(a)&&(a=a[0]));!a&&{}.VITE_BBLOCK_REGISTER&&(a={}.VITE_BBLOCK_REGISTER);a||(a="https://opengeospatial.github.io/bblocks/register.json");let f=R.get("showImported");f||(f={}.VITE_SHOW_IMPORTED);if(f)if(typeof f=="number"||!isNaN(parseInt(f))){const r=parseInt(f);c.showImported=r<0?!0:r}else c.showImported=["true","on","all"].includes(f);(typeof c.showImported>"u"||c.showImported===!1)&&(c.showImported=0);c.title||(c.title="OGC Location Building Blocks");document.title=c.title;c.baseUrl||(c.baseUrl="/@BASE_URL@/");const _={config:c,register:a},$=["#4363d8","#e6194b","#297a32","#75670b","#f58231","#911eb4","#30a5a5","#f032e6","#85ab08","#997474","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#000000"],K=(r=$)=>{const e={},t=new Set;return o=>(t.has(o)||(e[o]=r[t.size%r.length],t.add(o)),e[o])};function ie(r,e){let t;return function(...o){t&&clearTimeout(t);const s=this;t=setTimeout(()=>{r.apply(s,o)},e)}}function ne(r,e=null){let t=v(r);if(e){const o=new DOMParser().parseFromString(t,"text/html");t=G(o,e).body.innerHTML}return t}function G(r,e){return e&&(e.endsWith("/")||(e+="/"),r.querySelectorAll("[src],[href]").forEach(t=>{for(let o of["src","href"])if(t[o])try{const s=t.getAttribute(o),n=new URL(s,e);t.setAttribute(o,n.toString())}catch{}})),r}function ae(r){var t;r.preventDefault();let e=null;(t=r.target)!=null&&t.href?e=r.target.href:r.target.tagName.toLowerCase()==="img"&&(e=r.target.src),e&&window.open(e)}function ce(r){navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(r)}function p(){const r={resolve:null,reject:null};return r.promise=new Promise((e,t)=>Object.assign(r,{resolve:e,reject:t})),r}const H=L.create({timeout:3e3}),W=S(H,{cacheTakeover:!1}),Q={client:W},z="https://opengeospatial.github.io/bblocks/register.json",Y="default",J=["local","register","importLevel"],X=K(),b=Q.client;class Z{constructor(){this._registerLoadCallbacks=[],this.localRegister=null,this.registers={},this.registerPromises={local:p(),all:p()},this.errorRegisters={},this.loadedRegistersCount=0,this.bblocks={local:{},all:{}},this.bblockPromises={local:p(),all:p()},this.resourceMappings={},this._loadRegister(_.register,!0)}async _loadRegister(e,t,o=0){return e===Y&&(e=z),this.registers[e]?new Promise(()=>!0):(this.registers[e]={},b.get(e).then(s=>(Array.isArray(s.data)?this.registers[e]={local:t,url:e,importLevel:o,bblocks:s.data}:(this.registers[e]={...s.data,local:t,url:e,importLevel:o},Array.isArray(s.data.imports)&&s.data.imports.filter(n=>!this.registers[n]).forEach(n=>this._loadRegister(n,!1,o+1))),this.registers[e].color=X(e),this.registers[e].name||(this.registers[e].name=e.replace(/(\/build)?\/[^\/]+\.json$/,"").replace(/^.*\//,"")),t&&(this.localRegister=this.registers[e]),e)).then(s=>{const n=this.registers[s].bblocks;for(let i of n){if(i.local=t,i.importLevel=o,i.register={url:s,name:this.registers[s].name,color:this.registers[s].color},this.bblocks.all[i.itemIdentifier]=i,t&&(this.bblocks.local[i.itemIdentifier]=i),i.schema){for(let h of Object.values(i.schema))this.resourceMappings[h]=i.itemIdentifier;i.sourceSchema&&(this.resourceMappings[i.sourceSchema]=i.itemIdentifier)}i.openAPIDocument&&(console.log("adding",i.openAPIDocument),this.resourceMappings[i.openAPIDocument]=i.itemIdentifier,i.sourceOpenAPIDocument&&(this.resourceMappings[i.sourceOpenAPIDocument]=i.itemIdentifier))}return this.loadedRegistersCount++,t&&(this.bblockPromises.local.resolve(this.bblocks.local),this.registerPromises.local.resolve(this.localRegister)),this.loadedRegistersCount===Object.keys(this.registers).length&&(this.bblockPromises.all.resolve(this.bblocks.all),this.registerPromises.all.resolve(this.registers)),n}).catch(s=>{console.log("Error loading register",s),this.errorRegisters[e]={error:s}}).finally(()=>{this._onRegisterLoad()}))}getBBlocks(e=!1){return e?this.bblockPromises.all.promise:this.bblockPromises.local.promise}_onRegisterLoad(){this._registerLoadCallbacks.length&&this._registerLoadCallbacks.forEach(e=>e(this.registers,this.loadedRegistersCount,this.errorRegisters))}onRegisterLoad(e){e&&(this._registerLoadCallbacks.push(e),Object.keys(this.registers).length&&e(this.registers,this.loadedRegistersCount,this.errorRegisters))}async fetchBBlock(e){let t=await this.bblockPromises.local.promise;t[e]||(t=await this.bblockPromises.all.promise);const o=t[e],s=o.documentation["json-full"].url,i=(await b.get(s)).data;return J.forEach(h=>i[h]=o[h]),i}getRegisters(e=!1){return e?this.registerPromises.all.promise:this.registerPromises.local.promise}async fetchLdContext(e){return this.fetchDocument(e,"ldContext")}async fetchSourceLdContext(e){return this.fetchDocument(e,"sourceLdContext")}async fetchSourceSchema(e){return this.fetchDocument(e,"sourceSchema")}fetchDocument(e,t){let o;if(t=t.slice(),Array.isArray(t))for(o=e[t.shift()];o&&t.length;)o=o[t.shift()];else o=e[t];return o?b.get(o,{responseType:"text"}).catch(s=>{if(e.remoteCacheDir){const n=A.sha256(o);let i=e.remoteCacheDir;return i.slice(-1)!=="/"&&(i+="/"),b.get(i+n)}throw s}).then(s=>s.data):Promise.resolve(null)}isShown(e){const t=_.config.showImported;return t===!0||e===0||e.importLevel===0||e.local?!0:t?typeof e=="number"?t>=e:e.local||t>=e.importLevel:!1}async findResource(e){if(await this.registerPromises.all.promise,this.resourceMappings[e])return this.bblocks.all[this.resourceMappings[e]]}}const y=new Z,ee=[{path:"/",component:()=>u(()=>import("./Default.js"),["assets/Default.js","assets/vendor.js","assets/VContainer.js","assets/VContainer.css","assets/VList.js","assets/VList.css","assets/VToolbar.js","assets/dialog-transition.js","assets/VToolbar.css","assets/Default.css"]),children:[{path:"",name:"Home",component:()=>u(()=>import("./Home.js"),["assets/Home.js","assets/VTooltip.js","assets/vendor.js","assets/VList.js","assets/VContainer.js","assets/VContainer.css","assets/VList.css","assets/VTooltip.css","assets/VRow.js","assets/Home.css"])},{path:"bblock",name:"BuildingBlockList",component:()=>u(()=>import("./BuildingBlockList.js"),["assets/BuildingBlockList.js","assets/VExpansionPanel.js","assets/vendor.js","assets/VList.js","assets/VContainer.js","assets/VContainer.css","assets/VList.css","assets/dialog-transition.js","assets/VExpansionPanel.css","assets/VRow.js","assets/BuildingBlockList.css"])},{path:"bblock/:id/:section?",name:"BuildingBlock",component:()=>u(()=>import("./BuildingBlock.js"),["assets/BuildingBlock.js","assets/vendor.js","assets/VExpansionPanel.js","assets/VList.js","assets/VContainer.js","assets/VContainer.css","assets/VList.css","assets/dialog-transition.js","assets/VExpansionPanel.css","assets/VRow.js","assets/VToolbar.js","assets/VToolbar.css","assets/VTooltip.js","assets/VTooltip.css","assets/BuildingBlock.css"]),beforeEnter:async r=>{const e=await y.getBBlocks(_.config.showImported);if(!e[r.params.id]||!y.isShown(e[r.params.id]))return"404"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>u(()=>import("./NotFound.js"),["assets/NotFound.js","assets/VContainer.js","assets/vendor.js","assets/VContainer.css","assets/VRow.js"])}]}],te=(r,e,t)=>{const o=Object.entries(e.query).filter(s=>!r.query.hasOwnProperty(s[0]));if(!o.length)t();else{const s=Object.assign(Object.fromEntries(o),r.query);t({...r,query:s})}},P=O({history:T(_.config.baseUrl),routes:ee});P.beforeEach(te);function se(r){N(),r.use(q).use(P)}const E=D(M);se(E);console.log("BBlocks Viewer revision dfb3e2a (updated 2024-07-22T10:53:48+02:00)");E.mount("#app");export{j as _,ce as a,y as b,_ as c,ie as d,Q as h,ae as i,ne as m,G as s};
