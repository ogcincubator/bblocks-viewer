const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webfontloader.js","assets/vendor.js","assets/Default.js","assets/VContainer.js","assets/VContainer.css","assets/VList.js","assets/VList.css","assets/VToolbar.js","assets/dialog-transition.js","assets/VToolbar.css","assets/Default.css","assets/Home.js","assets/MarkdownText.js","assets/MarkdownText.css","assets/VRow.js","assets/VTooltip.js","assets/VTooltip.css","assets/Home.css","assets/NotFound.js","assets/BuildingBlockList.js","assets/VExpansionPanel.js","assets/VExpansionPanel.css","assets/BuildingBlockList.css","assets/BuildingBlock.js","assets/BuildingBlock.css"])))=>i.map(i=>d[i]);
import{c as A,r as L,o as D,a as O,m as T,b as j,F as U,s as E,d as x,e as F,f as V,g as M,h as q}from"./vendor.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const N=(o,e)=>{const t=o.__vccOpts||o;for(const[i,r]of e)t[i]=r;return t},$={};function K(o,e){const t=L("router-view");return D(),A(t)}const G=N($,[["render",K]]),H="modulepreload",Q=function(o){return"/@BASE_URL@/"+o},v={},u=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let s=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),b=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=s(t.map(l=>{if(l=Q(l),l in v)return;v[l]=!0;const m=l.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const f=document.createElement("link");if(f.rel=m?"stylesheet":H,m||(f.as="script"),f.crossOrigin="",f.href=l,b&&f.setAttribute("nonce",b),document.head.appendChild(f),m)return new Promise((B,I)=>{f.addEventListener("load",B),f.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&n(a.reason);return e().catch(n)})};async function W(){(await u(()=>import("./webfontloader.js").then(e=>e.w),__vite__mapDeps([0,1]))).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const z=O({theme:{themes:{light:{colors:{primary:"#1867C0",secondary:"#5CBBF6"}}}}}),c=window.bblocksViewer||{},k=new URLSearchParams(window.location.search);let h;const _=k.getAll("register");_!=null&&_.length&&(h=_.pop());h||(h=window.bblocksRegister||window.bblocksRegisters,Array.isArray(h)&&(h=h[0]));h||(h="https://opengeospatial.github.io/bblocks/register.json");let d=k.get("showImported");d||(d=void 0);if(d)if(typeof d=="number"||!isNaN(parseInt(d))){const o=parseInt(d);c.showImported=o<0?!0:o}else c.showImported=["true","on","all"].includes(d);(typeof c.showImported>"u"||c.showImported===!1)&&(c.showImported=0);c.title||(c.title="OGC Location Building Blocks");document.title=c.title;c.baseUrl||(c.baseUrl="/@BASE_URL@/");const w={config:c,register:h},Y=["#4363d8","#e6194b","#297a32","#75670b","#f58231","#911eb4","#30a5a5","#f032e6","#85ab08","#997474","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#000000"],J=(o=Y)=>{const e={},t=new Set;return i=>(t.has(i)||(e[i]=o[t.size%o.length],t.add(i)),e[i])};function de(o,e){let t;return function(...i){t&&clearTimeout(t);const r=this;t=setTimeout(()=>{o.apply(r,i)},e)}}function me(o,e=null){let t=T(o);if(e){const i=new DOMParser().parseFromString(t,"text/html");t=X(i,e).body.innerHTML}return t}function X(o,e){return e&&(e.endsWith("/")||(e+="/"),o.querySelectorAll("[src],[href]").forEach(t=>{for(let i of["src","href"])if(t[i])try{const r=t.getAttribute(i),n=new URL(r,e);t.setAttribute(i,n.toString())}catch{}})),o}function ge(o){navigator!=null&&navigator.clipboard&&navigator.clipboard.writeText(o)}function y(){const o={resolve:null,reject:null};return o.promise=new Promise((e,t)=>Object.assign(o,{resolve:e,reject:t})),o}const Z=j.create({timeout:3e3}),ee=U(Z,{cacheTakeover:!1}),te={client:ee},se="https://opengeospatial.github.io/bblocks/register.json",re="default",oe=["local","register","importLevel"],ie=J(),p=te.client;class ne{constructor(){this._registerLoadCallbacks=[],this.localRegister=null,this.registers={},this.registerPromises={local:y(),all:y()},this.errorRegisters={},this.loadedRegistersCount=0,this.bblocks={local:{},all:{}},this.bblockPromises={local:y(),all:y()},this.resourceMappings={},this._loadRegister(w.register,!0)}async _loadRegister(e,t,i=0){return e===re&&(e=se),this.registers[e]?new Promise(()=>!0):(this.registers[e]={},p.get(e).catch(r=>{var s;this.errorRegisters[e]={error:r};let n=(s=this.localRegister)==null?void 0:s.remoteCacheDir;if(n){const a=E.sha256(e);return n.slice(-1)!=="/"&&(n+="/"),p.get(n+a).then(b=>({fromCache:!0,response:b}))}throw r}).then(r=>{const n=r.fromCache||!1;n&&(r=r.response);let s=[];return Array.isArray(r.data)?this.registers[e]={local:t,url:e,importLevel:i,bblocks:r.data,fromCache:n}:(this.registers[e]={...r.data,local:t,url:e,importLevel:i,fromCache:n},Array.isArray(r.data.imports)&&(s=r.data.imports)),this.registers[e].color=ie(e),this.registers[e].name||(this.registers[e].name=e.replace(/(\/build)?\/[^/]+\.json$/,"").replace(/^.*\//,"")),t&&(this.localRegister=this.registers[e]),s!=null&&s.length&&s.filter(a=>!this.registers[a]).forEach(a=>this._loadRegister(a,!1,i+1)),e}).then(r=>{const n=this.registers[r].bblocks;for(let s of n){if(s.local=t,s.importLevel=i,s.register={url:r,name:this.registers[r].name,color:this.registers[r].color},this.bblocks.all[s.itemIdentifier]=s,t&&(this.bblocks.local[s.itemIdentifier]=s),s.schema){for(let a of Object.values(s.schema))this.resourceMappings[a]=s.itemIdentifier;s.sourceSchema&&(this.resourceMappings[s.sourceSchema]=s.itemIdentifier)}s.openAPIDocument&&(console.log("adding",s.openAPIDocument),this.resourceMappings[s.openAPIDocument]=s.itemIdentifier,s.sourceOpenAPIDocument&&(this.resourceMappings[s.sourceOpenAPIDocument]=s.itemIdentifier)),s.shaclRules&&!s.shaclShapes&&(s.shaclShapes=s.shaclRules,delete s.shaclRules)}return this.loadedRegistersCount++,t&&(this.bblockPromises.local.resolve(this.bblocks.local),this.registerPromises.local.resolve(this.localRegister)),this.loadedRegistersCount===Object.keys(this.registers).length&&(this.bblockPromises.all.resolve(this.bblocks.all),this.registerPromises.all.resolve(this.registers)),n}).catch(r=>{console.log("Error loading register",r),this.errorRegisters[e]={error:r}}).finally(()=>{this._onRegisterLoad()}))}getBBlocks(e=!1){return e?this.bblockPromises.all.promise:this.bblockPromises.local.promise}_onRegisterLoad(){this._registerLoadCallbacks.length&&this._registerLoadCallbacks.forEach(e=>e(this.registers,this.loadedRegistersCount,this.errorRegisters))}onRegisterLoad(e){e&&(this._registerLoadCallbacks.push(e),Object.keys(this.registers).length&&e(this.registers,this.loadedRegistersCount,this.errorRegisters))}async fetchBBlock(e){let t=await this.bblockPromises.local.promise;t[e]||(t=await this.bblockPromises.all.promise);const i=t[e],r=i.documentation["json-full"].url,s=(await p.get(r)).data;return s.shaclRules&&!s.shaclShapes&&(s.shaclShapes=s.shaclRules,delete s.shaclRules),oe.forEach(a=>s[a]=i[a]),s}getRegisters(e=!1){return e?this.registerPromises.all.promise:this.registerPromises.local.promise}async fetchLdContext(e){return this.fetchDocument(e,"ldContext")}async fetchSourceLdContext(e){return this.fetchDocument(e,"sourceLdContext")}async fetchSourceSchema(e){return this.fetchDocument(e,"sourceSchema")}fetchDocument(e,t){let i;if(t=t.slice(),Array.isArray(t))for(i=e[t.shift()];i&&t.length;)i=i[t.shift()];else i=e[t];return i?this.fetchDocumentByUrl(e,i):Promise.resolve(null)}fetchDocumentByUrl(e,t){return p.get(t,{responseType:"text"}).catch(i=>{if(e.remoteCacheDir){const r=E.sha256(t);let n=e.remoteCacheDir;return n.slice(-1)!=="/"&&(n+="/"),p.get(n+r)}throw i}).then(i=>i.data)}isShown(e){const t=w.config.showImported;return t===!0||e===0||e.importLevel===0||e.local?!0:t?typeof e=="number"?t>=e:e.local||t>=e.importLevel:!1}async findResource(e){if(await this.registerPromises.all.promise,this.resourceMappings[e])return this.bblocks.all[this.resourceMappings[e]]}}const S=new ne,ae=x("navigation",{state:()=>({items:[],handler:null}),actions:{clearItems(){this.items=[],this.handler=null},setItems(o,e){console.log("setting new items"),this.items=o,this.handler=e}}}),ce=[{path:"/",component:()=>u(()=>import("./Default.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])),children:[{path:"",name:"Home",component:()=>u(()=>import("./Home.js"),__vite__mapDeps([11,12,1,3,4,5,6,13,14,15,16,17]))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>u(()=>import("./NotFound.js"),__vite__mapDeps([18,3,1,4,14]))}]},{path:"/bblock",component:()=>u(()=>import("./Default.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10])),children:[{path:"",name:"BuildingBlockList",component:()=>u(()=>import("./BuildingBlockList.js"),__vite__mapDeps([19,20,1,5,3,4,6,8,21,15,16,14,22]))},{path:":id/:section?",name:"BuildingBlock",component:()=>u(()=>import("./BuildingBlock.js"),__vite__mapDeps([23,1,20,5,3,4,6,8,21,14,12,13,7,9,15,16,24])),beforeEnter:async o=>{const e=await S.getBBlocks(w.config.showImported);if(!e[o.params.id]||!S.isShown(e[o.params.id]))return"404";if(o.params.section==="json-ld")return{name:"BuildingBlock",params:{id:o.params.id,section:"semantic-uplift"}}}}]}],le=(o,e,t)=>{const i=Object.entries(e.query).filter(r=>!o.query.hasOwnProperty(r[0]));if(!i.length)t();else{const r=Object.assign(Object.fromEntries(i),o.query);t({...o,query:r})}},he=(o,e)=>{if(o.name==="BuildingBlock"&&e.name==="BuildingBlock"&&o.params.id===e.params.id)return;ae().clearItems()},P=F({history:V(w.config.baseUrl),routes:ce});P.beforeEach(le);P.beforeEach(he);function fe(o){W(),o.use(M()).use(z).use(P)}var R={gitInfo:{shortCommitId:"c444cc3",date:"2025-10-30T10:47:28+01:00"}};const C=q(G);fe(C);R.gitInfo&&console.log(`BBlocks Viewer revision ${R.gitInfo.shortCommitId} (updated ${R.gitInfo.date})`);C.mount("#app");export{N as _,u as a,S as b,w as c,de as d,ge as e,me as m,X as s,ae as u};
